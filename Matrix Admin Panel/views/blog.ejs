<%- include('header') %>
    <div class="page-wrapper">
        <form class="form-horizontal w-50" method="post" action="/blog/add-blog" enctype="multipart/form-data">
            <div class="card-body">
                <h4 class="card-title">Add Blog</h4>
                <div class="form-group row">
                    <label for="title" class="col-sm-3 text-right control-label col-form-label">Title</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" name="title" id="title" required
                            placeholder="Title Here">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="author" class="col-sm-3 text-right control-label col-form-label">Author</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" name="author" id="author" required
                            placeholder="Author Name Here">
                    </div>
                </div>


                <div class="form-group row">
                    <label for="category" class="col-sm-3 text-right control-label col-form-label">Category</label>
                    <div class="col-md-9">
                        <select name="category" is="category" class="select2 form-control custom-select"
                            style="width: 100%; height:36px;">
                            <!-- <option value="default" disabled selected>--</option>-->
                            <option value="Technology">Technology</option>
                            <option value="Cooking">Cooking</option>
                            <option value="Travel">Travel</option>
                            <option value="Personal">Personal</option>
                            <option value="Business">Business</option>
                            <option value="Fashion">Fashion</option>
                            <option value="Other" selected>Other</option>
                        </select>
                    </div>
                </div>


                <div class="form-group row">
                    <label for="cono1" class="col-sm-3 text-right control-label col-form-label">Description</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" name="description"></textarea>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 text-right control-label col-form-label">Blog Cover (optional)</label>
                    <div class="col-sm-9">
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" name="profileImage" id="profileImage">
                            <label class="custom-file-label" for="profileImage">Choose file...</label>
                            <div class="invalid-feedback">Example invalid custom file feedback</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="border-top">
                <div class="card-body">
                    <input type="submit" value="Add Blog" class="btn btn-primary rounded-4">
                </div>
            </div>
        </form>

        <form method="post" action="/blog/search" class="d-flex justify-content-center align-items-center mt-5">
            <label for="search" class="m-0 p-0">Search: </label>
            <input type="text" name="search" id="search" style="border-radius: 8px !important;" class="border m-1 p-1">
        </form>
        <form action="" class="text-center">
            <button class="btn btn-warning btn-sm mt-2">All</button>
            <% let OldData=[] %>
                <% blog.map((b)=>{ %>
                    <% if(b.category && !OldData.includes(b.category)) { %>
                        <a href="/blog?category=<%= b.category %>" class="btn btn-primary btn-sm mt-2 ml-2">
                            <%= b.category %>
                        </a>
                        <% OldData.push(b.category)%>
                    <%}%>
                <% })%>
        </form>



        </form>
        <div class="d-flex">
            <% blog.forEach((b, i)=>{ %>
                <div class="p-4 w-50">
                    <a href="/OneBlogView/<%= b._id %>" class="text-decoration-none" style="color: black;">

                        <img src="<%= b.coverImage %>" class="img-fluid mb-2 rounded-3" alt="" />
                        <h3>
                            <%= b.title %>
                        </h3>
                        <% if(b?.category){ %>
                            <span class="badge badge-pill badge-secondary mb-2"
                                style="background-color: #6c757d; color: white !important;">
                                <%= b.category %>
                            </span>
                            <% } %>
                                <h6>
                                    <%= b.author %>
                                </h6>

                                <p>
                                    <%= b.description %>
                                </p>
                                <a href="/blog/edit-blog/<%= b._id %>" class="text-warning pr-2">Edit</a>
                                <a href="/blog/delete-blog/<%= b._id %>" class="text-danger">Delete</a>
                    </a>
                </div>
                <% }) %>
        </div>
    </div>
    <%- include('footer') %>